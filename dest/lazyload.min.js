"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e(t):"function"==typeof define&&define.amd?define([],e(t)):t.LazyLoad=e(t)}("undefined"!=typeof global?global:this.window||this.global,function(t){var r={src:"data-src",srcset:"data-srcset",selector:".lazyload"};function o(t,e){this.settings=function r(t){var o={},s=!1,e=0,n=arguments.length;"[object Boolean]"===Object.prototype.toString.call(t)&&(s=t,e++);for(var i=function(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s&&"[object Object]"===Object.prototype.toString.call(t[e])?o[e]=r(!0,o[e],t[e]):o[e]=t[e])};e<n;e++){i(arguments[e])}return o}(r,e||{}),this.images=t||document.querySelectorAll(this.settings.selector),this.observer=null,this.init()}if(o.prototype={init:function(){if(!t.IntersectionObserver)return alert("不支持新方法直接全部展示"),void this.loadImages();var o=this;this.observer=new IntersectionObserver(function(t){t.forEach(function(t){if(0<t.intersectionRatio){o.observer.unobserve(t.target);var e=t.target.getAttribute(o.settings.src),r=t.target.getAttribute(o.settings.srcset);"img"===t.target.tagName.toLowerCase()?(e&&(t.target.src=e),r&&(t.target.srcset=r)):t.target.style.backgroundImage="url("+e+")"}})},{root:null,rootMargin:"0px",threshold:[0]}),this.images.forEach(function(t){o.observer.observe(t)})},loadAndDestroy:function(){this.settings&&(this.loadImages(),this.destroy())},loadImages:function(){if(this.settings){var o=this;this.images.forEach(function(t){var e=t.getAttribute(o.settings.src),r=t.getAttribute(o.settings.srcset);"img"===t.tagName.toLowerCase()?(e&&(t.src=e),r&&(t.srcset=r)):t.style.backgroundImage="url("+e+")"})}},destroy:function(){this.settings&&(this.observer.disconnect(),this.settings=null)}},t.lazyload=function(t,e){return new o(t,e)},t.jQuery){var e=t.jQuery;e.fn.lazyload=function(t){return(t=t||{}).attribute=t.attribute||"data-src",new o(e.makeArray(this),t),this}}return o});